{"ast":null,"code":"import React from'react';import axios from'axios';import{Container,Button,Alert}from'react-bootstrap';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Checkout=()=>{const[error,setError]=React.useState('');const handlePayment=async()=>{try{const{data}=await axios.post('http://143.244.140.159:5000/api/orders',{userId:localStorage.getItem('userId')||'guest',products:[{productId:'sample_product',quantity:1}],totalAmount:1000});const script=document.createElement('script');script.src='https://checkout.razorpay.com/v1/checkout.js';script.async=true;script.onload=()=>{const options={key:data.key,amount:1000*100,currency:'INR',order_id:data.orderId,handler:function(response){alert('Payment successful!');console.log(response);},prefill:{name:'Test User',email:'test@example.com'}};const rzp=new window.Razorpay(options);rzp.open();};document.body.appendChild(script);}catch(err){setError('Failed to initiate payment');console.error(err);}};return/*#__PURE__*/_jsxs(Container,{className:\"my-5\",style:{maxWidth:'500px'},children:[/*#__PURE__*/_jsx(\"h1\",{className:\"header-title\",children:\"DD Checkout\"}),error&&/*#__PURE__*/_jsx(Alert,{variant:\"danger\",children:error}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:handlePayment,className:\"w-100\",children:\"Pay Now\"})]});};export default Checkout;","map":{"version":3,"names":["React","axios","Container","Button","Alert","jsx","_jsx","jsxs","_jsxs","Checkout","error","setError","useState","handlePayment","data","post","userId","localStorage","getItem","products","productId","quantity","totalAmount","script","document","createElement","src","async","onload","options","key","amount","currency","order_id","orderId","handler","response","alert","console","log","prefill","name","email","rzp","window","Razorpay","open","body","appendChild","err","className","style","maxWidth","children","variant","onClick"],"sources":["/var/www/dharshangroups/client/src/pages/Checkout.js"],"sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport { Container, Button, Alert } from 'react-bootstrap';\n\nconst Checkout = () => {\n  const [error, setError] = React.useState('');\n\n  const handlePayment = async () => {\n    try {\n      const { data } = await axios.post('http://143.244.140.159:5000/api/orders', {\n        userId: localStorage.getItem('userId') || 'guest',\n        products: [{ productId: 'sample_product', quantity: 1 }],\n        totalAmount: 1000,\n      });\n\n      const script = document.createElement('script');\n      script.src = 'https://checkout.razorpay.com/v1/checkout.js';\n      script.async = true;\n      script.onload = () => {\n        const options = {\n          key: data.key,\n          amount: 1000 * 100,\n          currency: 'INR',\n          order_id: data.orderId,\n          handler: function (response) {\n            alert('Payment successful!');\n            console.log(response);\n          },\n          prefill: {\n            name: 'Test User',\n            email: 'test@example.com',\n          },\n        };\n        const rzp = new window.Razorpay(options);\n        rzp.open();\n      };\n      document.body.appendChild(script);\n    } catch (err) {\n      setError('Failed to initiate payment');\n      console.error(err);\n    }\n  };\n\n  return (\n    <Container className=\"my-5\" style={{ maxWidth: '500px' }}>\n      <h1 className=\"header-title\">DD Checkout</h1>\n      {error && <Alert variant=\"danger\">{error}</Alert>}\n      <Button variant=\"primary\" onClick={handlePayment} className=\"w-100\">Pay Now</Button>\n    </Container>\n  );\n};\n\nexport default Checkout;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,SAAS,CAAEC,MAAM,CAAEC,KAAK,KAAQ,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE3D,KAAM,CAAAC,QAAQ,CAAGA,CAAA,GAAM,CACrB,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGX,KAAK,CAACY,QAAQ,CAAC,EAAE,CAAC,CAE5C,KAAM,CAAAC,aAAa,CAAG,KAAAA,CAAA,GAAY,CAChC,GAAI,CACF,KAAM,CAAEC,IAAK,CAAC,CAAG,KAAM,CAAAb,KAAK,CAACc,IAAI,CAAC,wCAAwC,CAAE,CAC1EC,MAAM,CAAEC,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC,EAAI,OAAO,CACjDC,QAAQ,CAAE,CAAC,CAAEC,SAAS,CAAE,gBAAgB,CAAEC,QAAQ,CAAE,CAAE,CAAC,CAAC,CACxDC,WAAW,CAAE,IACf,CAAC,CAAC,CAEF,KAAM,CAAAC,MAAM,CAAGC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC,CAC/CF,MAAM,CAACG,GAAG,CAAG,8CAA8C,CAC3DH,MAAM,CAACI,KAAK,CAAG,IAAI,CACnBJ,MAAM,CAACK,MAAM,CAAG,IAAM,CACpB,KAAM,CAAAC,OAAO,CAAG,CACdC,GAAG,CAAEhB,IAAI,CAACgB,GAAG,CACbC,MAAM,CAAE,IAAI,CAAG,GAAG,CAClBC,QAAQ,CAAE,KAAK,CACfC,QAAQ,CAAEnB,IAAI,CAACoB,OAAO,CACtBC,OAAO,CAAE,QAAAA,CAAUC,QAAQ,CAAE,CAC3BC,KAAK,CAAC,qBAAqB,CAAC,CAC5BC,OAAO,CAACC,GAAG,CAACH,QAAQ,CAAC,CACvB,CAAC,CACDI,OAAO,CAAE,CACPC,IAAI,CAAE,WAAW,CACjBC,KAAK,CAAE,kBACT,CACF,CAAC,CACD,KAAM,CAAAC,GAAG,CAAG,GAAI,CAAAC,MAAM,CAACC,QAAQ,CAAChB,OAAO,CAAC,CACxCc,GAAG,CAACG,IAAI,CAAC,CAAC,CACZ,CAAC,CACDtB,QAAQ,CAACuB,IAAI,CAACC,WAAW,CAACzB,MAAM,CAAC,CACnC,CAAE,MAAO0B,GAAG,CAAE,CACZtC,QAAQ,CAAC,4BAA4B,CAAC,CACtC2B,OAAO,CAAC5B,KAAK,CAACuC,GAAG,CAAC,CACpB,CACF,CAAC,CAED,mBACEzC,KAAA,CAACN,SAAS,EAACgD,SAAS,CAAC,MAAM,CAACC,KAAK,CAAE,CAAEC,QAAQ,CAAE,OAAQ,CAAE,CAAAC,QAAA,eACvD/C,IAAA,OAAI4C,SAAS,CAAC,cAAc,CAAAG,QAAA,CAAC,aAAW,CAAI,CAAC,CAC5C3C,KAAK,eAAIJ,IAAA,CAACF,KAAK,EAACkD,OAAO,CAAC,QAAQ,CAAAD,QAAA,CAAE3C,KAAK,CAAQ,CAAC,cACjDJ,IAAA,CAACH,MAAM,EAACmD,OAAO,CAAC,SAAS,CAACC,OAAO,CAAE1C,aAAc,CAACqC,SAAS,CAAC,OAAO,CAAAG,QAAA,CAAC,SAAO,CAAQ,CAAC,EAC3E,CAAC,CAEhB,CAAC,CAED,cAAe,CAAA5C,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}